CreateProxyRequestAPI:
  type: object
  properties:
    name: { type: string }
    description: { type: string }
    address: { type: string }
    protocol: { $ref: '#/components/schemas/ProxyProtocol' }
    username: { type: string }
    password: { type: string }
    countryCode: { type: string }
    isEnabled: { type: boolean }
    notes: { type: string }
  required: [name, address]
ProxyDetailsResponse:
  type: object
  properties:
    host: { type: string }
    port: { type: integer }
    protocol: { type: string }
    username: { type: string }
  description: "(LEGACY) Minimal proxy details shape retained for backward compatibility. New integrations should use the full Proxy schema."

# Full proxy resource exposed to frontend (all fields optional until backend handlers upgraded)
Proxy:
  type: object
  description: "Comprehensive proxy resource including operational and health metadata. All properties currently optional while backend response is being incrementally expanded."
  properties:
    id: { type: string, format: uuid }
    name: { type: string }
    description: { type: string }
    address: { type: string, description: "Full proxy address (scheme://user:pass@host:port or host:port)" }
    protocol: { $ref: '#/components/schemas/ProxyProtocol' }
    username: { type: string }
    host: { type: string }
    port: { type: integer }
    isEnabled: { type: boolean }
    isHealthy: { type: boolean }
    lastStatus: { type: string }
    lastCheckedAt: { type: string, format: date-time }
    latencyMs: { type: integer, format: int64 }
    city: { type: string }
    countryCode: { type: string }
    provider: { type: string }
    createdAt: { type: string, format: date-time }
    updatedAt: { type: string, format: date-time }
    status: { type: string, description: "Frontend-oriented status enum (e.g., Active, Failed)" }
    notes: { type: string }
    successCount: { type: integer }
    failureCount: { type: integer }
    lastTested: { type: string, format: date-time }
    lastError: { type: string }
    inputUsername: { type: string }
    inputPassword: { type: string }
ProxyTestResponse:
  type: object
  properties:
    proxyId: { type: string, format: uuid }
    success: { type: boolean }
    statusCode: { type: integer }
    responseTime: { type: integer, format: int64 }
    error: { type: string }
UpdateProxyRequestAPI:
  type: object
  properties:
    name: { type: string }
    description: { type: string }
    address: { type: string }
    protocol: { $ref: '#/components/schemas/ProxyProtocol' }
    username: { type: string }
    password: { type: string }
    countryCode: { type: string }
    isEnabled: { type: boolean }
    notes: { type: string }
ProxyHealthCheckResponse:
  type: object
  properties:
    proxyId: { type: string, format: uuid }
    success: { type: boolean }
    status: { type: string }
    responseTime: { type: integer, format: int64 }
    message: { type: string }
    timestamp: { type: string, format: date-time }
BulkHealthCheckResponse:
  type: object
  properties:
    totalProxies: { type: integer }
    healthyProxies: { type: integer }
    failedProxies: { type: integer }
    results:
      type: array
      items: { $ref: '#/components/schemas/ProxyHealthCheckResponse' }
BulkProxyOperationResponse:
  type: object
  properties:
    totalRequested: { type: integer }
    successCount: { type: integer }
    errorCount: { type: integer }
    successfulProxies:
      type: array
      items: { type: string, format: uuid }
    failedProxies:
      type: array
      items:
        type: object
        properties:
          proxyId: { type: string, format: uuid }
          error: { type: string }
    results:
      type: array
      items:
        type: object
        additionalProperties: true
BulkUpdateProxiesRequest:
  type: object
  properties:
    proxyIds:
      type: array
      items: { type: string, format: uuid }
      minItems: 1
    updates: { $ref: '#/components/schemas/UpdateProxyRequestAPI' }
  required: [proxyIds, updates]
BulkDeleteProxiesRequest:
  type: object
  properties:
    proxyIds:
      type: array
      items: { type: string, format: uuid }
      minItems: 1
  required: [proxyIds]
BulkProxyTestResponse:
  type: object
  properties:
    totalRequested: { type: integer }
    successCount: { type: integer }
    errorCount: { type: integer }
    results:
      type: array
      items: { $ref: '#/components/schemas/ProxyTestResponse' }
