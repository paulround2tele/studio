get:
  tags: [keyword-extraction]
  security:
    - cookieAuth: []
  summary: Stream keyword extraction
  operationId: keyword_extract_stream
  parameters:
    - name: url
      in: query
      required: true
      schema: { type: string, format: uri }
    - name: keywordSetId
      in: query
      required: true
      schema: { type: string, format: uuid }
    - name: httpPersonaId
      in: query
      schema: { type: string, format: uuid }
    - name: dnsPersonaId
      in: query
      schema: { type: string, format: uuid }
  description: |
    Server-Sent Events stream. Clients SHOULD handle heartbeats and reconnection hints.
    Heartbeat events are sent periodically:
    - see example SseHeartbeat; clients SHOULD keep the connection alive.
    The server MAY suggest a retry delay with an SSE control line (see SseRetry example).
  responses:
    '200':
      description: SSE stream
      content:
        text/event-stream:
          schema: { type: string }
          examples:
            heartbeat:
              summary: Heartbeat event
              value: |
                event: ping
                data: {}
            retry:
              summary: Client reconnection hint
              value: |
                retry: 5000
            progress:
              summary: Example extraction progress event
              value: |
                event: extraction_progress
                data: {"url":"https://example.com","progress":0.5}
    '401': { $ref: '../../components/responses.yaml#/Unauthorized' }
    '403': { $ref: '../../components/responses.yaml#/Forbidden' }
    '429': { $ref: '../../components/responses.yaml#/RateLimitExceeded' }
    '500': { $ref: '../../components/responses.yaml#/InternalServerError' }
