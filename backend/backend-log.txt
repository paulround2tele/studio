Building application...
go build -buildvcs=false -o bin/apiserver ./cmd/apiserver
Running application from binary...
./bin/apiserver
2025/07/29 16:05:41 API Validator initialized and custom validations registered.
2025/07/29 16:05:41 Starting DomainFlow API Server...
2025/07/29 16:05:41 Successfully loaded environment variables from ../.env
2025/07/29 16:05:41 Config: Attempting to load main config from: config.json
2025/07/29 16:05:41 Optimization configuration initialized for environment: 
2025/07/29 16:05:41 Configuration loaded with environment overrides.
2025/07/29 16:05:41 Optimization enabled: true (phases: batch=true, service=true, external=true, caching=true)
2025/07/29 16:05:41 Global WebSocket broadcaster initialized and started.
2025/07/29 16:05:41 Initializing PostgreSQL database connection...
2025/07/29 16:05:41 Connecting to database: host=localhost port=5432 user=domainflow dbname=domainflow_production sslmode=disable
2025/07/29 16:05:41 Successfully connected to PostgreSQL database.
2025/07/29 16:05:41 PostgreSQL-backed stores initialized.
2025/07/29 16:05:41 ProxyManager: Initializing with 0 proxy entries.
2025/07/29 16:05:41 ProxyManager: Performing initial health checks for 0 supported proxies (timeout per proxy: 7s)...
2025/07/29 16:05:41 ProxyManager: Initialization and initial health checks complete. Total managed: 0, Initially active: 0
2025/07/29 16:05:41 ProxyManager initialized.
2025/07/29 16:05:41 HTTPValidator engine initialized.
2025/07/29 16:05:41 KeywordScanner engine initialized.
2025/07/29 16:05:41 DNSValidator engine initialized.
2025/07/29 16:05:41 ContentFetcher engine initialized.
2025/07/29 16:05:41 Using session configuration for environment: development (CookieSecure: false, CookieDomain: '', CookieName: 'domainflow_session')
2025/07/29 16:05:41 Session service initialized.
2025/07/29 16:05:41 Worker domain-gen-worker-1753805141 registered successfully
2025/07/29 16:05:41 EfficientWorkerPool initialized with 2 workers (min: 2, max: 16, queue: 1000)
2025/07/29 16:05:41 DomainGenerationService initialized with global offset tracking.
2025/07/29 16:05:41 PhaseExecutionService initialized - Phase 2.5 & 3.9 direct engine integration complete.
2025/07/29 16:05:41 Worker Lino registered successfully
2025/07/29 16:05:41 CampaignWorkerService initialized.
2025/07/29 16:05:41 Main APIHandler initialized.
2025/07/29 16:05:41 CampaignOrchestratorAPIHandler initialized with standalone services support.
2025/07/29 16:05:41 WebSocketAPIHandler initialized.
2025/07/29 16:05:41 DistributedCacheManager: Initialized in-memory cache with 100MB limit
2025/07/29 16:05:41 DistributedCacheManager initialized with in-memory distributed caching.
2025/07/29 16:05:41 Redis cache for N+1 optimization disabled in configuration.
2025/07/29 16:05:41 Service factory initialized with optimization support (enabled: true)
2025/07/29 16:05:41 AuthHandler initialized with user profile caching.
2025/07/29 16:05:41 CachedSessionService initialized with distributed caching.
2025/07/29 16:05:41 High-performance cached auth middleware initialized.
2025/07/29 16:05:41 HealthCheckHandler initialized.
2025/07/29 16:05:41 DatabaseHandler initialized.
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

2025/07/29 16:05:41 Backend configured for development with CORS support
[GIN-debug] GET    /api/v2/ws                --> github.com/fntelecomllc/studio/backend/internal/api.(*WebSocketHandler).HandleConnections-fm (8 handlers)
2025/07/29 16:05:41 Registered WebSocket route under /api/v2/ws.
[GIN-debug] GET    /ping                     --> github.com/fntelecomllc/studio/backend/internal/api.PingHandlerGin (8 handlers)
[GIN-debug] GET    /api/openapi.yaml         --> main.main.(*RouterGroup).StaticFile.func52 (8 handlers)
[GIN-debug] HEAD   /api/openapi.yaml         --> main.main.(*RouterGroup).StaticFile.func52 (8 handlers)
2025/07/29 16:05:41 Registered OpenAPI 3.0 specification route under /api/openapi.yaml
[GIN-debug] POST   /api/v2/auth/login        --> github.com/fntelecomllc/studio/backend/internal/api.(*AuthHandler).Login-fm (9 handlers)
[GIN-debug] POST   /api/v2/auth/logout       --> github.com/fntelecomllc/studio/backend/internal/api.(*AuthHandler).Logout-fm (8 handlers)
[GIN-debug] POST   /api/v2/auth/refresh      --> github.com/fntelecomllc/studio/backend/internal/api.(*AuthHandler).RefreshSession-fm (8 handlers)
[GIN-debug] GET    /api/v2/auth/me           --> github.com/fntelecomllc/studio/backend/internal/api.(*AuthHandler).Me-fm (9 handlers)
[GIN-debug] POST   /api/v2/auth/change-password --> github.com/fntelecomllc/studio/backend/internal/api.(*AuthHandler).ChangePassword-fm (9 handlers)
2025/07/29 16:05:41 Registered authentication routes under /api/v2/auth
[GIN-debug] GET    /api/v2/health            --> github.com/fntelecomllc/studio/backend/internal/api.(*HealthCheckHandler).HandleHealthCheck-fm (8 handlers)
[GIN-debug] GET    /api/v2/health/ready      --> github.com/fntelecomllc/studio/backend/internal/api.(*HealthCheckHandler).HandleReadinessCheck-fm (8 handlers)
[GIN-debug] GET    /api/v2/health/live       --> github.com/fntelecomllc/studio/backend/internal/api.(*HealthCheckHandler).HandleLivenessCheck-fm (8 handlers)
2025/07/29 16:05:41 Registered API v2 health check routes: /api/v2/health, /api/v2/health/ready, /api/v2/health/live
2025/07/29 16:05:41 Authentication configured for session-only (offline mode)
[GIN-debug] GET    /api/v2/personas          --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).ListAllPersonasGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/personas          --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).CreatePersonaGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/personas/:id      --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetPersonaByIDGin-fm (10 handlers)
[GIN-debug] PUT    /api/v2/personas/:id      --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdatePersonaGin-fm (10 handlers)
[GIN-debug] DELETE /api/v2/personas/:id      --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).DeletePersonaGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/personas/:id/test --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).TestPersonaGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/personas/http/:id --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetHttpPersonaByIDGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/personas/dns/:id  --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetDnsPersonaByIDGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/proxies           --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).ListProxiesGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/proxies           --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).AddProxyGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/proxies/status    --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetProxyStatusesGin-fm (10 handlers)
[GIN-debug] PUT    /api/v2/proxies/:proxyId  --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateProxyGin-fm (10 handlers)
[GIN-debug] DELETE /api/v2/proxies/:proxyId  --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).DeleteProxyGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/proxies/:proxyId/test --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).TestProxyGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/proxies/:proxyId/health-check --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).ForceCheckSingleProxyGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/proxies/health-check --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).ForceCheckAllProxiesGin-fm (10 handlers)
[GIN-debug] PUT    /api/v2/proxies/bulk/update --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).BulkUpdateProxiesGin-fm (10 handlers)
[GIN-debug] DELETE /api/v2/proxies/bulk/delete --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).BulkDeleteProxiesGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/proxies/bulk/test --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).BulkTestProxiesGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/proxy-pools       --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).ListProxyPoolsGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/proxy-pools       --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).CreateProxyPoolGin-fm (10 handlers)
[GIN-debug] PUT    /api/v2/proxy-pools/:poolId --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateProxyPoolGin-fm (10 handlers)
[GIN-debug] DELETE /api/v2/proxy-pools/:poolId --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).DeleteProxyPoolGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/proxy-pools/:poolId/proxies --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).AddProxyToPoolGin-fm (10 handlers)
[GIN-debug] DELETE /api/v2/proxy-pools/:poolId/proxies/:proxyId --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).RemoveProxyFromPoolGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/config/dns        --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetDNSConfigGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/config/dns        --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateDNSConfigGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/config/http       --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetHTTPConfigGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/config/http       --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateHTTPConfigGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/config/worker     --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetWorkerConfigGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/config/worker     --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateWorkerConfigGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/config/rate-limit --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetRateLimiterConfigGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/config/rate-limit --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateRateLimiterConfigGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/config/auth       --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetAuthConfigGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/config/auth       --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateAuthConfigGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/config/logging    --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetLoggingConfigGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/config/logging    --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateLoggingConfigGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/config/proxy-manager --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetProxyManagerConfigGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/config/proxy-manager --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateProxyManagerConfigGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/config/server     --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetServerConfigGin-fm (10 handlers)
[GIN-debug] PUT    /api/v2/config/server     --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateServerConfigGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/config/features   --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetFeatureFlagsGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/config/features   --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateFeatureFlagsGin-fm (10 handlers)
[GIN-debug] POST   /api/v2/keyword-sets      --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).CreateKeywordSetGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/keyword-sets      --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).ListKeywordSetsGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/keyword-sets/:setId --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetKeywordSetGin-fm (10 handlers)
[GIN-debug] PUT    /api/v2/keyword-sets/:setId --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).UpdateKeywordSetGin-fm (10 handlers)
[GIN-debug] DELETE /api/v2/keyword-sets/:setId --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).DeleteKeywordSetGin-fm (10 handlers)
[GIN-debug] GET    /api/v2/keyword-sets/:id/rules --> github.com/fntelecomllc/studio/backend/internal/api.(*APIHandler).GetKeywordSetWithRulesGin-fm (10 handlers)
2025/07/29 16:05:41 CampaignWorkerService [Lino]: Starting 5 workers (poll interval: 5s)...
panic: ':id' in new path '/api/v2/keyword-sets/:id/rules' conflicts with existing wildcard ':setId' in existing prefix '/api/v2/keyword-sets/:setId'

goroutine 1 [running]:
github.com/gin-gonic/gin.(*node).addRoute(0xb88a09?, {0xc000330aa0, 0x1e}, {0xc00032d310, 0xa, 0xa})
	/home/vboxuser/go/pkg/mod/github.com/gin-gonic/gin@v1.10.1/tree.go:247 +0xb6a
github.com/gin-gonic/gin.(*Engine).addRoute(0xc00034a000, {0xb88a09, 0x3}, {0xc000330aa0, 0x1e}, {0xc00032d310, 0xa, 0xa})
	/home/vboxuser/go/pkg/mod/github.com/gin-gonic/gin@v1.10.1/gin.go:352 +0x252
github.com/gin-gonic/gin.(*RouterGroup).handle(0xc00031f480, {0xb88a09, 0x3}, {0xb96880?, 0x0?}, {0xc000334358, 0x1, 0x32?})
	/home/vboxuser/go/pkg/mod/github.com/gin-gonic/gin@v1.10.1/routergroup.go:89 +0x13e
github.com/gin-gonic/gin.(*RouterGroup).GET(...)
	/home/vboxuser/go/pkg/mod/github.com/gin-gonic/gin@v1.10.1/routergroup.go:117
main.main()
	/home/vboxuser/studio/backend/cmd/apiserver/main.go:582 +0x6418
make: *** [Makefile:24: run] Error 2
