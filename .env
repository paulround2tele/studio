# =============================================================================
# DomainFlow Shared Development Environment Configuration
# =============================================================================
# This file is shared across all development environments for consistency.
# For machine-specific overrides, create .env.local (not committed to git).
# =============================================================================

# =============================================================================
# Frontend Configuration (Next.js)
# =============================================================================
# Frontend development server port (separate from backend)
FRONTEND_PORT=3000
# SSE stream base URL - keep relative so Next.js rewrites proxy through the frontend origin
NEXT_PUBLIC_SSE_URL=/api/v2
# Enable automatic capture of frontend network traffic into backend logs
NEXT_PUBLIC_ENABLE_NETWORK_LOGGING=true
# API URL is auto-detected by sophisticated client implementation
# Development: auto-detects as http://localhost:8080/api/v2
# Production: auto-detects as http://domain/api/v2

# =============================================================================
# Backend Configuration (Go API Server)
# =============================================================================
SERVER_PORT=8080
GIN_MODE=debug
API_KEY=dev_641f018600f939b24bb496ea87e6bb2edf1922457a058d5a3aa27a00c7073147_local
LOG_LEVEL=DEBUG
APISERVER_LOG_PATH=logs/apiserver.log
APISERVER_ALLOWED_ORIGINS=https://turbo-space-telegram-wr7965q44x6635qwq-3000.app.github.dev,http://localhost:3000,http://127.0.0.1:3000,http://localhost:3001,http://127.0.0.1:3001,http://localhost:3002,http://127.0.0.1:3002,http://localhost:3003,http://127.0.0.1:3003
NEXT_PUBLIC_API_URL=/api/v2
NEXT_PUBLIC_SSE_URL=/api/v2

# =============================================================================
# Database Configuration (Development)
# =============================================================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=domainflow_production
DATABASE_USER=domainflow
DATABASE_PASSWORD=pNpTHxEWr2SmY270p1IjGn3dP
DATABASE_SSL_MODE=disable
DB_MAX_CONNECTIONS=25
DB_MAX_IDLE_CONNECTIONS=5
DB_CONNECTION_LIFETIME=300

# Legacy DB env vars (for compatibility)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=domainflow_production
DB_USER=domainflow
DB_PASSWORD=pNpTHxEWr2SmY270p1IjGn3dP
DB_SSLMODE=disable

# =============================================================================
# Rate Limiting & CORS (Development)
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20
CORS_ORIGINS=http://localhost:3000,http://192.168.1.35:3000,http://192.168.1.40:3000,https://turbo-space-telegram-wr7965q44x6635qwq-3000.app.github.dev
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# Session Security
# =============================================================================
# HMAC secret for signing session cookies (must match between backend and middleware)
# Generate with: openssl rand -hex 32
SESSION_SIGNING_SECRET=dev-session-secret-change-in-production-abc123xyz789

# =============================================================================
# Environment Configuration
# =============================================================================
NODE_ENV=development
ENV=development

# =============================================================================
# UX Refactor Feature Flags (Phases A-E)
# =============================================================================
# Enable unified campaign experience (default: false for gradual rollout)
NEXT_PUBLIC_ENABLE_UNIFIED_CAMPAIGN_EXPERIENCE=true

# =============================================================================
# Feature Flags (Backend)
# =============================================================================
# Enable HTTP enrichment for analysis phase
ENABLE_HTTP_ENRICHMENT=true
# Enable reading analysis data from the feature table instead of legacy JSON
ANALYSIS_READS_FEATURE_TABLE=true
# Enable writing extraction data into domain_extraction_features
NEXT_PUBLIC_SSE_DEBUG_OVERLAY=true
# =============================================================================
# Machine-Specific Overrides
# =============================================================================
# If you need different settings for your machine, create .env.local with:
# NEXT_PUBLIC_API_URL=http://your-custom-host:port
# NEXT_PUBLIC_SSE_URL=http://your-custom-host:port/api/v2
# DATABASE_HOST=your-custom-db-host
# SERVER_PORT=your-custom-port
# =============================================================================